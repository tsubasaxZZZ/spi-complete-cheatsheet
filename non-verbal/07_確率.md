# 確率チートシート

## 基本概念と公式

### 確率の基本
- **確率の定義**: 確率 = 望ましい結果の数 ÷ すべての可能な結果の数
- **表記方法**: P(A) = 事象Aが起こる確率
- **確率の範囲**: 0 ≤ P(A) ≤ 1（0%～100%）
- **確実に起こる事象**: P(確実事象) = 1（100%）
- **絶対に起こらない事象**: P(空事象) = 0（0%）

### 和事象と積事象
- **和事象**: A または B が起こる確率 → P(A ∪ B)
- **積事象**: A かつ B が起こる確率 → P(A ∩ B)

### 和事象の確率（加法定理）
- **基本形**: P(A ∪ B) = P(A) + P(B) - P(A ∩ B)
- **排反事象の場合**: P(A ∪ B) = P(A) + P(B)（AとBが同時に起こり得ない場合）

### 余事象（補事象）の確率
- **定義**: P(A^C) = 事象Aが起こらない確率
- **公式**: P(A^C) = 1 - P(A)

### 条件付き確率
- **定義**: 事象Bが起きたという条件下で、事象Aが起きる確率
- **表記**: P(A|B)
- **公式**: P(A|B) = P(A ∩ B) / P(B)

### 乗法定理
- **一般形**: P(A ∩ B) = P(A) × P(B|A) = P(B) × P(A|B)
- **独立事象の場合**: P(A ∩ B) = P(A) × P(B)（AとBが互いに影響しない場合）

## 頻出問題パターンと解法テクニック

### パターン1: 基本的な確率計算
```
問題例: 1つのサイコロを振って、4以上の目が出る確率は？
```

**解法**:
1. 望ましい結果: 4, 5, 6の3通り
2. 全ての可能な結果: 1, 2, 3, 4, 5, 6の6通り
3. 確率 = 3/6 = 1/2 = 0.5 = 50%

### パターン2: 複数回の独立試行
```
問題例: コインを3回投げるとき、表が少なくとも1回出る確率は？
```

**解法**:
1. 余事象を考える: 「表が1回も出ない」= 「全て裏」の確率
2. 全て裏の確率: (1/2)^3 = 1/8
3. 求める確率 = 1 - 1/8 = 7/8 = 0.875 = 87.5%

### パターン3: 条件付き確率
```
問題例: 袋の中に赤玉3個と白玉2個が入っています。2個の玉を同時に取り出すとき、
       両方とも赤玉である確率は？
```

**解法**:
1. 全ての取り出し方: $_5C_2 = 10$通り
2. 赤玉を2個取り出す方法: $_3C_2 = 3$通り
3. 確率 = 3/10 = 0.3 = 30%

### パターン4: 順番に取り出す場合（復元・非復元）
```
問題例: 袋の中に赤玉3個と白玉2個が入っています。玉を1つずつ取り出すとき（取り出した後は戻さない）、
       1個目が赤玉で2個目も赤玉である確率は？
```

**解法**:
1. 1個目が赤玉である確率: 3/5
2. 1個目が赤玉のとき、2個目も赤玉である確率: 2/4 = 1/2
3. 求める確率 = 3/5 × 1/2 = 3/10 = 0.3 = 30%

### パターン5: 期待値の計算
```
問題例: サイコロを1回振ったときの出る目の期待値は？
```

**解法**:
- 期待値 = Σ(各結果×その確率)
- 計算: 1×(1/6) + 2×(1/6) + 3×(1/6) + 4×(1/6) + 5×(1/6) + 6×(1/6) = 3.5

## 特殊な確率問題と解法テクニック

### 反復試行の確率
```
問題例: ある試験の合格率は70%です。3人が受験したとき、ちょうど2人が合格する確率は？
```

**解法**:
1. 二項分布の公式を使用: $_nC_r p^r (1-p)^{n-r}$
2. n=3, r=2, p=0.7, 1-p=0.3
3. 計算: $_3C_2 \times 0.7^2 \times 0.3^1 = 3 \times 0.49 \times 0.3 = 0.441 = 44.1%$

### ベイズの定理
```
問題例: ある病気の検査で、実際に病気の人が陽性と判定される確率は95%、
       健康な人が誤って陽性と判定される確率は4%です。
       母集団の1%がこの病気にかかっているとき、
       検査で陽性と判定された人が実際に病気である確率は？
```

**解法**:
1. P(D) = 病気である確率 = 0.01
2. P(+|D) = 病気の人が陽性と判定される確率 = 0.95
3. P(+|D^C) = 健康な人が陽性と判定される確率 = 0.04
4. ベイズの定理を使用:
   P(D|+) = [P(+|D) × P(D)] / [P(+|D) × P(D) + P(+|D^C) × P(D^C)]
   = [0.95 × 0.01] / [0.95 × 0.01 + 0.04 × 0.99]
   = 0.0095 / (0.0095 + 0.0396) = 0.0095 / 0.0491 ≈ 0.1935 = 19.35%

### 幾何分布（初めて成功するまでの試行回数）
```
問題例: コインを投げ続け、初めて表が出るまでの回数の期待値は？
```

**解法**:
- 幾何分布の期待値: E(X) = 1/p
- p = 表が出る確率 = 1/2
- 期待値 = 1/(1/2) = 2回

## 確率の性質と重要法則

### 確率の加法定理の一般化
- n個の事象A₁, A₂, ..., Aₙに対して:
- P(A₁ ∪ A₂ ∪ ... ∪ Aₙ) = Σ P(Aᵢ) - ΣΣ P(Aᵢ ∩ Aⱼ) + ΣΣΣ P(Aᵢ ∩ Aⱼ ∩ Aₖ) - ... + (-1)^(n-1) P(A₁ ∩ A₂ ∩ ... ∩ Aₙ)

### 全確率の定理
- 互いに排反で全体を埋め尽くす事象B₁, B₂, ..., Bₙに対して:
- P(A) = Σ P(A|Bᵢ) × P(Bᵢ)

### 独立事象の性質
- A, B, Cが互いに独立であるとき:
- P(A ∩ B ∩ C) = P(A) × P(B) × P(C)
- P(A ∩ B) = P(A) × P(B)
- P(A ∩ C) = P(A) × P(C)
- P(B ∩ C) = P(B) × P(C)

## よくある間違いと対策

1. **確率の掛け合わせミス**: 独立事象か依存事象かの判断ミス
   → 条件付き確率を使うかどうかを明確にする

2. **余事象の活用不足**: 直接計算が複雑な場合、余事象を使うと簡単になることがある
   → 「少なくとも1つ」は「全く無い」の余事象として計算

3. **条件の見落とし**: 「復元抽出」か「非復元抽出」かの区別
   → 問題文の「戻す/戻さない」「同時に」などの表現に注意

4. **場合分けの不足**: すべての場合を考慮していない
   → 樹形図や表を使って確実に場合分けする

5. **分子・分母の誤り**: 確率計算の基本的なミス
   → 分母は「全体の場合の数」、分子は「求める事象の場合の数」と確認

## 計算のショートカットと実践テクニック

1. **典型的な確率値を覚える**:
   - コイン: 表/裏 = 1/2
   - サイコロ: 特定の目 = 1/6、偶数の目 = 3/6 = 1/2
   - トランプ: 特定のスート（ハートなど） = 13/52 = 1/4、特定の数字 = 4/52 = 1/13

2. **樹形図の活用**:
   - 複雑な条件付き確率問題は樹形図で整理
   - 枝に確率、葉に結果を書き込む

3. **公式の変形と使い分け**:
   - 条件付き確率: P(A|B) = P(A ∩ B) / P(B)
   - 乗法定理: P(A ∩ B) = P(A) × P(B|A)
   - 適切な方を選んで使う

4. **期待値の性質**:
   - 線形性: E(aX + bY) = aE(X) + bE(Y)
   - 確率変数の和の期待値 = 各期待値の和